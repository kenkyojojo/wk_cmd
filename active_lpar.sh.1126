#!/usr/bin/ksh

#開啟各個LAPR，經由LPAR_ID 由小至大依序開啟,以每10秒開啟10台LPAR，從LPAR_ID 2號開始開啟。
#因LPAR_ID為1時為VIOS1，而VIOS1因前項操作已先開啟。

for x in `lssyscfg -r sys -F name `
do
		for i in `lssyscfg -m $x -r lpar -F lpar_id | sort -n| grep -v '^1$'`
        do
				count=$(($count+1))
				if [[ $count -eq 10 ]];
				then
					 sleep 10;
					 count=0
				fi

				if [[ $i -ge "2"  &&  $i -le "96" ]] ; then
					echo "To Start Active LPAR_ID:${i}"
					chsysstate -m $x -o on -r lpar -id ${i}  -f FIX_FAST
				else
					echo "Please to Check LPAR ID"
					exit 
				fi
        done
done
